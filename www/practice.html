<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
  <script src="components/loader.js"></script>
  <!-- <script src="js/app.js"></script> -->
  <script src="lib/onsenui/js/onsenui.min.js"></script>

  <link rel="stylesheet" href="components/loader.css">
  <link rel="stylesheet" href="lib/onsenui/css/onsenui.css">
  <link rel="stylesheet" href="lib/onsenui/css/onsen-css-components.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="css/history.js"></script>

  <script type="module">
    // Page init event
    import shuffle from 'shuffle-array';

    if (ons.platform.isIPhoneX()) {
      document.documentElement.setAttribute('onsflag-iphonex-portrait', '');
      document.documentElement.setAttribute('onsflag-iphonex-landscape', '');
    }

    document.addEventListener('init', function(event) {
      var page = event.target;

      if (page.matches('#pra-top-page')) {
        page.querySelector('#pra-start').onclick = function() {
          document.querySelector('#navigator').pushPage('pra.html');

          // セレクトボックスで選択した値を取得する↓
          const questionNum = document.getElementById("questionNum").value;
          const format = document.getElementById("format").value;
          const range = document.getElementById("range").value;

          console.log(questionNum, format, range);
          // ↑ここまでは順調。

          // 下にずらずら条件分岐を書きます
          // 参考「http://lifelog.main.jp/wordpress/?p=2557」
          if (format === "all-era") {
            const findEra = history.filter((element) => {
              return element.時代;
            });
            // console.log(findEra);
            
            // 全時代からやるなら順番に出題を選択できないようにしてランダムのみ選択できるようにしたい
            if (range === "orderBy") {
              
            } else if (range === "random") {
              const shuffleHistoryObj = shuffle(findEra);
              console.log(shuffleHistoryObj);
            }

          } else if (format === "yayoi-era") {
            const findEra = history.filter((element) => {
              return element.時代 === "弥生";
            });
            console.log(findEra);
          } else if (format === "asuka-era") {
            const findEra = history.filter((element) => {
              return element.時代 === "飛鳥";
            });
            console.log(findEra);
          } else if (format === "nara-era") {
            const findEra = history.filter((element) => {
              return element.時代 === "奈良";
            });
            console.log(findEra);
          }

        };
      } else if (page.matches('#pra-page')) {
        page.querySelector('#pra-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage();
       };
      }

    });

  </script>
</head>
<body>
  <ons-navigator id="navigator" page="pra-top.html"></ons-navigator>

  <ons-template id="pra-top.html">
    <ons-page id="pra-top-page" class="practice">
      <ons-toolbar>
        <div class="center">演習モード・モード選択</div>
      </ons-toolbar>
  
      <img src="css/picture/ヘタリア_プロイセン.jpg" height="200">
    
      <!-- 「https://itsakura.com/js-selectbox」selectボックスの値の習得の仕方。役立ちそう -->
      <p>問題数</p>
      <ons-form>
        <ons-select id="questionNum">
          <option value="10">10問</option>
          <option value="30">30問</option>
          <option value="50">50問</option>
        </ons-select>
      </ons-form>
  
      <p>出題範囲</p>
      <ons-form>
        <ons-select id="format">
          <option value="all-era">全ての範囲から出題</option>
          <option value="yayoi-era">弥生時代から出題</option>
          <option value="asuka-era">飛鳥時代から出題</option>
          <option value="nara-era">奈良時代から出題</option>
        </ons-select>
      </ons-form>
  
      <p>出題形式</p>
      <ons-form>
        <ons-select id="range">
          <option value="orderBy">順番に出題</option>
          <option value="random">ランダムに出題</option>
        </ons-select>
      </ons-form>
  
      <footer>
        <ons-button id="pra-start">スタート</ons-button>
        <br>
        <a href="index.html">TOPへ戻る</a>
      </footer>
    </ons-page>
  </ons-template>

  <!-- 練習ページ（問題）ひな形 -->
  <ons-template id="pra.html">
    <ons-page id="pra-page">
      <ons-toolbar>
        <div class="center">第〇問</div>
      </ons-toolbar>
  
      <!-- オブジェクトに合わせて配列historyの画像部分が表示されるようにする -->
      <img src="css/picture/ヘタリア_イギリス.jpg" height="200">
  
      <p>配列historyの「内容」部分を問題として書く</p>
  
      <!-- ons-inputよく分かっていないので後でちゃんと見る -->
      <p>
        <ons-inputmodifier="underbar" placeholder="Username" float>入力欄</ons-input>
      </p>
  
      <footer>
        <ons-button id="next-pra-btn">次の問題へ進む</ons-button>
        <ons-button id="pra-top-btn">練習モードTOPへ戻る</ons-button>
      </footer>
  
    </ons-page>
  </ons-template>

</body>
</html>