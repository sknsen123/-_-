<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
  <script src="components/loader.js"></script>
  <!-- <script src="js/app.js"></script> -->
  <script src="lib/onsenui/js/onsenui.min.js"></script>

  <link rel="stylesheet" href="components/loader.css">
  <link rel="stylesheet" href="lib/onsenui/css/onsenui.css">
  <link rel="stylesheet" href="lib/onsenui/css/onsen-css-components.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="css/history.js"></script>

  <script>
    // Page init event
    document.addEventListener('init', function(event) {
      var page = event.target;
      
      // 本当は全部英語で書くんやできっと…英語できないとダメやで…
      // 余裕があれば下の処理を時代別にするのではなくて1つにまとめる！！！

      // 学習モードトップ⇔弥生時代
      if (page.matches('#st-top-page')) {
        page.querySelector('#yayoi-btn').onclick = function() {
          document.querySelector('#navigator').pushPage('yayoi.html', {
            // 'yayoi.html'に"弥生"というデータを渡す
            data: {
              時代: "弥生"
            }
          });
        };
      } else if (page.matches('#yayoi-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage();
        };
      }

      // 学習モードトップ⇔飛鳥時代
      if (page.matches('#st-top-page')) {
        page.querySelector('#asuka-btn').onclick = function() {
          document.querySelector('#navigator').pushPage('asuka.html',{
            data: {
              時代: "飛鳥"
            }
          });
        };
      } else if (page.matches('#asuka-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage();
       };
      }

      // 学習モードトップ⇔奈良時代
      if (page.matches('#st-top-page')) {
        page.querySelector('#nara-btn').onclick = function() {
          document.querySelector('#navigator').pushPage('nara.html', {
            data: {
              時代: "奈良"
            }
          });
        };
      } else if (page.matches('#nara-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage();
        };
      }

      // 年号リスト⇔学習ページ
      if (page.matches('#yayoi-page')) {
        page.querySelector('#goro-btn1').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          // ↑「https://onsen.io/v2/api/js/ons-navigator.html#sending-custom-data-to-a-new-page」に書いてある
          // topPage.data で上の'yayoi.html'に渡した"弥生"というデータを受け取る
          age.年号 = "57"; //←ここを変えなければならない

          // ここでさらに"弥生"に"57"というデータを足す(=代入する)
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      if (page.matches('#yayoi-page')) {
        page.querySelector('#goro-btn2').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          age.年号 = "239"; 
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      if (page.matches('#asuka-page')) {
        page.querySelector('#goro-btn3').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          age.年号 = "538/552"; 
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      if (page.matches('#asuka-page')) {
        page.querySelector('#goro-btn4').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          age.年号 = "593"; 
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      if (page.matches('#asuka-page')) {
        page.querySelector('#goro-btn5').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          age.年号 = "603"; 
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      if (page.matches('#asuka-page')) {
        page.querySelector('#goro-btn6').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          age.年号 = "604"; 
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      if (page.matches('#asuka-page')) {
        page.querySelector('#goro-btn7').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          age.年号 = "607"; 
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      if (page.matches('#asuka-page')) {
        page.querySelector('#goro-btn8').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          age.年号 = "645"; 
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      if (page.matches('#asuka-page')) {
        page.querySelector('#goro-btn9').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          age.年号 = "663"; 
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      if (page.matches('#asuka-page')) {
        page.querySelector('#goro-btn10').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          age.年号 = "672"; 
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      if (page.matches('#asuka-page')) {
        page.querySelector('#goro-btn11').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          age.年号 = "701"; 
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      if (page.matches('#nara-page')) {
        page.querySelector('#goro-btn12').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          age.年号 = "710"; 
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      if (page.matches('#nara-page')) {
        page.querySelector('#goro-btn13').onclick = function() {
          let age = document.querySelector('#navigator').topPage.data;
          age.年号 = "743"; 
          document.querySelector('#navigator').pushPage('study-list.html', {
            data: age
          });
        };
      } else if (page.matches('#study-list-page')) {
        page.querySelector('#st-top-btn').onclick = function() {
          document.querySelector('#navigator').popPage({times: 2});
        };
      }
      // ここまで力技で各学習ページを出しています。できればまとめよう。

      // ページ開いたらその年号の解説とかが出るようにしたい。↓
      if (page.matches('#study-list-page')) {

        let age = document.querySelector('#navigator').topPage.data; //ここで{時代:"弥生", 年号:"57"}を受け取る
        let foundHistory = history.find((element) => {
          // historyという配列の中からelementを取り出す
          return element.年号 === age.年号;
        });

        // 学習ページのJSのID取得→定数で定義
        const era = document.getElementById('era');
        const ageNum = document.getElementById('age-num');
        const nengo = document.getElementById('nengo');
        const stPic = document.getElementById('stPic');
        const goro = document.getElementById('goro');
        const explanation = document.getElementById('explanation');
        const yuru = document.getElementById('yuru');
        
        // 押された年号のその他(時代・番号・内容・語呂合わせ・解説)が入るようにして着地先に渡す
        era.textContent = foundHistory.時代;
        ageNum.textContent = foundHistory.時代別;
        nengo.textContent = foundHistory.年号;
        // 画像の表示の仕方：参考「https://techacademy.jp/magazine/20738」
        stPic.src = foundHistory.画像;
        goro.textContent = foundHistory.ゴロ合わせ;
        explanation.textContent = foundHistory.内容;
        yuru.textContent = foundHistory.解説;

        // 横移動だけは「history.js」の「通し」を数値にすればいける
        document.getElementById('next-btn').addEventListener('click', () => {
          let presentGoro = foundHistory.通し;
          if (foundHistory.通し === 13) {
            return;
          }
          presentGoro ++;
          foundHistory = history.find((element) => {
            return element.通し === presentGoro;
          });

          era.textContent = foundHistory.時代;
          ageNum.textContent = foundHistory.時代別;
          nengo.textContent = foundHistory.年号;
          stPic.src = foundHistory.画像;
          goro.textContent = foundHistory.ゴロ合わせ;
          explanation.textContent = foundHistory.内容;
          yuru.textContent = foundHistory.解説;
        });   

        document.getElementById('prev-btn').addEventListener('click', () => {
          let presentGoro = foundHistory.通し;
          if (foundHistory.通し === 1) {
            return;
          }
          presentGoro --;
          foundHistory = history.find((element) => {
            return element.通し === presentGoro;
          });

          era.textContent = foundHistory.時代;
          ageNum.textContent = foundHistory.時代別;
          nengo.textContent = foundHistory.年号;
          stPic.src = foundHistory.画像;
          goro.textContent = foundHistory.ゴロ合わせ;
          explanation.textContent = foundHistory.内容;
          yuru.textContent = foundHistory.解説;
        });       

       }
    });

    if (ons.platform.isIPhoneX()) {
      document.documentElement.setAttribute('onsflag-iphonex-portrait', '');
      document.documentElement.setAttribute('onsflag-iphonex-landscape', '');
    }


  </script>
</head>
<body>
  <!-- 学習モードトップ -->
  <ons-navigator id="navigator" page="st-top.html"></ons-navigator>

  <ons-template id="st-top.html">
    <ons-page id="st-top-page" class="st-top">
      <ons-toolbar>
        <div class="center">学習モード</div>
      </ons-toolbar>
        
      <!-- 下の画像は変えてください笑(イメージなのでちゃんと変更する！) -->
      <img class="gil heta" src="css/picture/ヘタリア_プロイセン.jpg">

    <div class="st-list">
      <ons-list-header>時代選択</ons-list-header>
      <ons-list>
        <ons-list-item id="yayoi-btn">弥生</ons-list-item>
        <ons-list-item id="asuka-btn">飛鳥</ons-list-item>
        <ons-list-item id="nara-btn">奈良</ons-list-item>
        <!-- <ons-list-item>平安</ons-list-item>
        <ons-list-item>鎌倉</ons-list-item>
        <ons-list-item>室町</ons-list-item>
        <ons-list-item>安土桃山</ons-list-item>
        <ons-list-item>江戸</ons-list-item>
        <ons-list-item>明治</ons-list-item>
        <ons-list-item>大正</ons-list-item>
        <ons-list-item>昭和(戦前)</ons-list-item>
        <ons-list-item>昭和(戦後)</ons-list-item> -->
      </ons-list>
    </div>
  
      <footer>
        <a href="index.html" class="goTop">TOPへ戻る</a>
      </footer>
</ons-page>
</ons-template>

<!-- 弥生時代 -->
<ons-template id="yayoi.html">
  <ons-page id="yayoi-page">
    <ons-toolbar>
      <div class="center">弥生</div>
    </ons-toolbar>
      
    <!-- 下の画像はイメージなのでちゃんと変更する！ -->
    <img class="Kiku heta" src="css/picture/祖国.jpeg">

  <div>
    <ons-list-header>年号選択</ons-list-header>
    <ons-list>
      <!-- 以下の年代もそうだけどボタンによってリストが付け変わるようにしたい… -->
      <!-- クラスを使うべきなのか？ -->
      <ons-list-item id="goro-btn1">57</ons-list-item>
      <ons-list-item id="goro-btn2">239</ons-list-item>
    </ons-list>
  </div>

    <footer>
      <ons-button id="st-top-btn">学習モードTOPへ戻る</ons-button>
    </footer>
</ons-page>
</ons-template>

<!-- 飛鳥時代 -->
<ons-template id="asuka.html">
  <ons-page id="asuka-page">
    <ons-toolbar>
      <div class="center">飛鳥</div>
    </ons-toolbar>
      
    <!-- 下の画像は変えてください笑(イメージなのでちゃんと変更する！) -->
    <img class="Feli heta" src="css/picture/ヘタリア_北イタリア.jpg">

  <div>
    <ons-list-header>年号選択</ons-list-header>
    <ons-list>
      <ons-list-item id="goro-btn3">538/552</ons-list-item>
      <ons-list-item id="goro-btn4">593</ons-list-item>
      <ons-list-item id="goro-btn5">603</ons-list-item>
      <ons-list-item id="goro-btn6">604</ons-list-item>
      <ons-list-item id="goro-btn7">607</ons-list-item>
      <ons-list-item id="goro-btn8">645</ons-list-item>
      <ons-list-item id="goro-btn9">663</ons-list-item>
      <ons-list-item id="goro-btn10">697</ons-list-item>
      <ons-list-item id="goro-btn11">701</ons-list-item>
    </ons-list>
  </div>

  <footer>
    <ons-button id="st-top-btn">学習モードTOPへ戻る</ons-button>
  </footer>
</ons-page>
</ons-template>

<!-- 奈良時代 -->
<ons-template id="nara.html">
  <ons-page id="nara-page">
    <ons-toolbar>
      <div class="center">奈良</div>
    </ons-toolbar>
      
    <!-- 下の画像は変えてください笑(イメージなのでちゃんと変更する！) -->
    <img class="Rovi heta" src="css/picture/ヘタリア_南イタリア.jpeg">

  <div>
    <ons-list-header>年号選択</ons-list-header>
    <ons-list>
      <ons-list-item id="goro-btn12">710</ons-list-item>
      <ons-list-item id="goro-btn13">743</ons-list-item>
    </ons-list>
  </div>

  <footer>
    <ons-button id="st-top-btn">学習モードTOPへ戻る</ons-button>
  </footer>
</ons-page>
</ons-template>

<!-- 学習ページひな形 -->
<ons-template id="study-list.html">
  <ons-page id="study-list-page" class="st-container">
    <ons-toolbar>
      <div class="center"><span id="era"></span>時代 <span id="age-num"></span></div>
    </ons-toolbar>

    <!-- 語呂合わせ -->
    <!-- どんな仕組みで表示するかイメージが分からないな… -->
  <div class="st-toptop">
    <h1 id="nengo"></h1>
    <p id="goro"></p>
  </div>

  <!-- 写真(イメージなのでちゃんと変更する！) -->
  <!-- まだ写真はデータベースに加えていないので、うまくいったらデータベースに加える…！ -->
  <img id="stPic" height="200" alt="画像">
  <!-- <img id="stPic" class="Arther heta" src="css/ヘタリア_イギリス.jpg"> -->

  <p id="explanation"></p>
  <p id="yuru"></p>

  <!-- これで前の年号に飛びたい -->
  <footer>
    <ons-button id="prev-btn">前へ</ons-button>
    <!-- 時代一覧に飛ぶ -->
    <ons-button id="st-top-btn">学習モードTOPへ戻る</ons-button>
    <!-- これで次の年号に飛びたい -->
    <ons-button id="next-btn">次へ</ons-button>
  </footer>

</ons-page>
</ons-template>


</body>
</html>